<Window x:Class="CATERINGMANAGEMENT.View.Windows.EditScheduleWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Edit Schedule"
        Height="500" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#FFFDFDFD">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <!-- Top Title Row -->
            <RowDefinition Height="Auto"/>
            <!-- Main Content Row -->
            <RowDefinition Height="*"/>
            <!-- Close Button Row -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top Title + Subtitle -->
        <StackPanel Grid.Row="0" Margin="0,0,0,15">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <materialDesign:PackIcon Kind="CalendarAccount" Width="36" Height="36" Foreground="#673AB7" Margin="0,0,8,0"/>
                <TextBlock Text="Schedule Details" 
                   FontWeight="Bold" 
                   FontSize="26" 
                   VerticalAlignment="Center"
                   Foreground="#333"/>
            </StackPanel>
            <TextBlock Text="Overview of scheduled event and assigned workers" 
               FontSize="14" 
               Foreground="Gray"
               Margin="44,2,0,0"/>
        </StackPanel>


        <!-- Main Content: Two Columns -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Reservation Details -->
            <StackPanel Grid.Column="0" Margin="0,0,15,0">
                <!-- Client -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <materialDesign:PackIcon Kind="AccountCircle" Width="24" Height="24" Foreground="#673AB7" Margin="0,0,8,0"/>
                    <StackPanel>
                        <TextBlock Text="{Binding GroupedSchedule.ClientName}" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="Client Name" FontSize="12" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>

                <!-- Receipt -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <materialDesign:PackIcon Kind="Receipt" Width="24" Height="24" Foreground="#673AB7" Margin="0,0,8,0"/>
                    <StackPanel>
                        <TextBlock Text="{Binding GroupedSchedule.ReceiptNumber}" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="Receipt #" FontSize="12" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>

                <!-- Event Date -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <materialDesign:PackIcon Kind="Calendar" Width="24" Height="24" Foreground="#673AB7" Margin="0,0,8,0"/>
                    <StackPanel>
                        <TextBlock Text="{Binding GroupedSchedule.EventDate, StringFormat={}{0:yyyy-MM-dd}}" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="Event Date" FontSize="12" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>

                <!-- Location -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <materialDesign:PackIcon Kind="MapMarker" Width="24" Height="24" Foreground="#673AB7" Margin="0,0,8,0"/>
                    <StackPanel>
                        <TextBlock Text="{Binding GroupedSchedule.Location}" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="Location" FontSize="12" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>

                <!-- Venue -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <materialDesign:PackIcon Kind="Domain" Width="24" Height="24" Foreground="#673AB7" Margin="0,0,8,0"/>
                    <StackPanel>
                        <TextBlock Text="{Binding GroupedSchedule.Venue}" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="Venue" FontSize="12" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>

                <!-- Package -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <materialDesign:PackIcon Kind="PackageVariant" Width="24" Height="24" Foreground="#673AB7" Margin="0,0,8,0"/>
                    <StackPanel>
                        <TextBlock Text="{Binding GroupedSchedule.PackageName}" FontWeight="SemiBold" FontSize="16"/>
                        <TextBlock Text="Package" FontSize="12" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>

            <!-- Workers List with Scroll -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <DataGrid ItemsSource="{Binding AssignedWorkers}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          HeadersVisibility="Column"
                          IsReadOnly="True"
                          RowHeaderWidth="0"
                          GridLinesVisibility="None"
                          ColumnHeaderHeight="35"
                          RowHeight="50"
                          Background="White"
                          Margin="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Worker Name"
                                            Binding="{Binding Name}"
                                            Width="*" 
                                            FontSize="16"/>
                        <DataGridTemplateColumn Header="Actions" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Remove"
                                            Command="{Binding DataContext.RemoveWorkerCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"
                                            Foreground="White"
                                            Background="#C62828"
                                            Padding="5,2"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </ScrollViewer>
        </Grid>

        <!-- Close Button -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Close"
                    Command="{Binding CloseCommand}"
                    Width="100"/>
        </StackPanel>
    </Grid>
</Window>
